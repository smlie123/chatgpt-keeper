# ChatGPT对话目录 Chrome插件

一个用于获取和展示ChatGPT聊天对话目录的Chrome浏览器插件，提供便捷的对话导航功能。

## 功能特性

- 📋 **对话目录导航** - 自动提取当前对话中的所有用户提问
- 🎯 **快速定位** - 点击问题可快速滚动到对应位置
- 📱 **侧栏展示** - 右侧可折叠侧栏，不影响原页面使用
- 💾 **实时同步** - 自动读取IndexedDB数据，实时更新对话内容
- 🎨 **美观界面** - 现代化UI设计，支持深色模式
- ⚡ **轻量高效** - 无需额外权限，不影响页面性能

## 安装方法

### 开发者模式安装

1. 打开Chrome浏览器，进入扩展程序管理页面：
   - 地址栏输入 `chrome://extensions/`
   - 或者点击右上角三点菜单 → 更多工具 → 扩展程序

2. 开启「开发者模式」（页面右上角的开关）

3. 点击「加载已解压的扩展程序」

4. 选择本项目的文件夹（包含manifest.json的文件夹）

5. 插件安装完成，会在扩展程序列表中显示

## 使用方法

### 基本使用

1. **访问ChatGPT** - 打开 https://chatgpt.com 或 https://chat.openai.com

2. **进入对话页面** - 点击进入任意一个具体的对话

3. **查看对话目录** - 页面右侧会出现一个折叠按钮，点击展开侧栏

4. **快速导航** - 在侧栏中点击任意问题，页面会自动滚动到对应位置

### 插件功能

- **Popup页面** - 点击浏览器工具栏中的插件图标，查看订阅信息和插件状态
- **侧栏切换** - 点击页面右侧的折叠按钮来展开/收起对话目录
- **问题高亮** - 点击问题后，对应的对话内容会短暂高亮显示

## 文件结构

```
chatkeeper-forchatgpt/
├── manifest.json          # 插件配置文件
├── popup.html            # 弹出页面HTML
├── popup.css             # 弹出页面样式
├── popup.js              # 弹出页面逻辑
├── content.js            # 内容脚本（核心功能）
├── content.css           # 内容脚本样式
├── icons/                # 插件图标
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
└── README.md             # 说明文档
```

## 技术实现

### 核心功能

1. **数据读取** - 通过IndexedDB API读取ChatGPT的本地对话数据
2. **消息解析** - 解析messages数组，提取用户提问（偶数索引位置）
3. **DOM注入** - 在页面中注入右侧栏UI组件
4. **滚动定位** - 通过多种策略定位并滚动到目标消息位置

### 数据格式

插件会读取ChatGPT在IndexedDB中存储的对话数据，数据结构如下：

```javascript
{
  "id": "对话ID",
  "title": "对话标题",
  "messages": [
    { "id": "message-1", "text": "" },           // 忽略第一条
    { "id": "message-2", "text": "用户问题1" },    // 用户提问
    { "id": "message-3", "text": "AI回答1" },     // AI回答
    { "id": "message-4", "text": "用户问题2" },    // 用户提问
    { "id": "message-5", "text": "AI回答2" }      // AI回答
    // ...
  ]
}
```

## 兼容性

- **浏览器支持** - Chrome 88+（Manifest V3）
- **网站支持** - ChatGPT官网（chatgpt.com, chat.openai.com）
- **系统支持** - Windows, macOS, Linux

## 开发说明

### 本地开发

1. 克隆或下载项目代码
2. 按照安装方法加载到Chrome
3. 修改代码后，在扩展程序页面点击「重新加载」
4. 刷新ChatGPT页面测试功能

### 调试方法

- **Content Script调试** - 在ChatGPT页面按F12，在Console中查看日志
- **Popup调试** - 右键点击插件图标 → 检查弹出内容
- **Background调试** - 在扩展程序页面点击「检查视图」

## 注意事项

1. **数据安全** - 插件仅读取本地IndexedDB数据，不会上传任何信息
2. **页面兼容** - 插件会自动适配ChatGPT页面的更新
3. **性能影响** - 插件设计轻量化，对页面性能影响极小
4. **隐私保护** - 所有数据处理都在本地进行，不涉及网络传输

## 更新日志

### v1.0.0 (2024-01-01)
- ✨ 初始版本发布
- 🎯 实现对话目录提取和导航功能
- 📱 添加可折叠侧栏界面
- 💾 支持IndexedDB数据读取
- 🎨 美观的现代化UI设计

## 许可证

MIT License

## 支持与反馈

如果您在使用过程中遇到问题或有改进建议，欢迎通过以下方式联系：

- 📧 邮箱：support@example.com
- 🐛 问题反馈：请详细描述问题和复现步骤
- 💡 功能建议：欢迎提出新功能需求

---

感谢使用ChatGPT对话目录插件！